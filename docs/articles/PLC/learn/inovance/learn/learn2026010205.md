# **H5U PLC 通讯方式&扩展模块&基础指令**

本次培训系统地讲解了H5U PLC从硬件连接、软件操作到基础编程的全流程。以下是需要掌握的知识点和标准，按学习顺序和逻辑层次归纳如下：

## **第一部分：程序上传/下载&通讯连接（操作基础）**

**核心要点**：掌握三种连接方式的操作流程、常见问题排查方法及密码安全机制。

| 连接方式 | 操作步骤与关键细节 | 常见问题与排查（必须掌握） |
| :--- | :--- | :--- |
| **1. USB方式** | - 使用USB数据线直接连接电脑与PLC。<br>- 在编程软件中选择对应的USB通讯端口。 | - 确保数据线可靠，驱动正常安装。<br>- 通讯测试是必要步骤。 |
| **2. 以太网方式（最常用、重点）** | **步骤**：<br>1. 用网线连接电脑与PLC的以太网口。<br>2. **关键细节**：若自动测试失败，必须**手动配置电脑网口IP地址**，确保与PLC处于**同一网段**（如PLC IP为`192.168.1.10`，电脑可设为`192.168.1.20`）。<br>3. 在软件中搜索并选择正确的PLC设备及IP。 | **核心排查流程**：<br>- **问题**：能搜索到PLC但测试失败/Ping不通。<br>- **原因1：IP冲突**。解决方法：修改电脑或PLC的IP地址。<br>- **原因2：选错网卡**。解决方法：在电脑的“网络适配器”中确认实际连接PLC的网口，并在软件中选择对应的以太网选项（如“以太网”而非“以太网二”）。<br>- **标准**：测试结果必须显示 **“已联通”** 方可进行后续操作。 |
| **3. 无线方式** | - 通过一个**路由器**搭建局域网：PLC接路由器LAN口，电脑连接该路由器的WiFi。<br>- 本质是**以太网通讯的无线延伸**。 | - 确保所有设备（PLC、电脑）在同一路由器网络下。<br>- 稳定性可能不如有线。 |
| **通用安全机制：密码设置** | - **作用**：程序上传/下载前需先登录，保护知识产权。<br>- **设置**：密码可为数字、英文、中文或特殊符号（如`123456`）。<br>- **风险（重中之重）**：**遗忘密码可能导致设备无法访问，造成永久性锁死**。<br>- **操作**：无密码可直接操作；有密码必须登录；密码可删除。 | **操作标准**：<br>- 上传程序（F9快捷键）前，若工程有未保存内容，**必须先保存**，因为上传会覆盖当前工程。<br>- 上传成功后，PLC的**运行指示灯会亮起**，表明程序已执行。 |

---

## **第二部分：程序注释与模块配置（工程规范化）**

**核心要点**：掌握提升程序可读性的注释方法和正确配置硬件模块的参数。

**1. 程序注释的三种方法**
| 方法 | 操作路径 | 适用场景与优势 |
| :--- | :--- | :--- |
| **全局变量表** | 在软件左侧的【软元件表】中直接为每个软元件（如X0， Y0）添加注释。 | - **项目初期规划时使用**，便于集中管理所有元件功能，如标注`X0`为“主机启动按钮”，`Y0`为“电机启动”。 |
| **右键菜单** | 在程序编辑区，右键点击某个软元件，选择“编辑元件注释”。 | - **修改单个元件注释时最快捷**。 |
| **在线编辑（最灵活）** | 双击程序段，点击**红色笔图标（注释编辑功能）**，然后输入元件编号即可实时添加注释。 | - **边编程边注释**，无需中断编写流程，效率最高。所有相同编号的元件注释会自动同步。 |

**掌握标准**：养成**及时、清晰**添加注释的习惯，确保程序逻辑一目了然。

**2. 模块与参数配置**
- **添加模块**：在软件【配置】->【模块配置】中，根据实际硬件添加IO、模拟量、温度等扩展模块。
- **参数设置（细节关键）**：
    - **数字量模块**：主要区分**输出类型**（`ETN`为NPN型，`ETP`为PNP型），并配置起始地址。
    - **模拟量模块**：需设置每个**通道的模式**（如0-10V电压输入或4-20mA电流输入）及**数字量范围**（如0-16000）。
    - **温度模块**：需设置**温度单位**、**补偿值（温度偏差）** 等。
- **标准**：能根据项目需求，正确添加模块并完成基本参数配置。

---

## **第三部分：梯形图编程基础指令与经典案例（核心内容）**

**核心要点**：深刻理解三个基本元件的本质，并能将其应用于经典控制电路。

**1. 三个基础指令（重中之重）**

| 指令名称 | 梯形图符号 | 电气类比与功能详解 | 掌握标准 |
| :--- | :--- | :--- | :--- |
| **常开触点** | <code>-&#124; &#124;-</code> | **类比**：一个**未按下**的按钮开关。<br>**功能**：当其对应的软元件状态为 **`OFF` (0)** 时，触点**断开**，逻辑不通；状态为 **`ON` (1)** 时，触点**闭合**，逻辑导通。 | 1. 能准确识别和绘制符号。<br>2. 理解其逻辑：**得电闭合，失电断开**。<br>3. 在程序中通常用作**启动条件**。 |
| **常闭触点** | <code>-&#124;/&#124;-</code> | **类比**：一个**正常状态下闭合**的开关（如急停按钮）。<br>**功能**：与常开触点**相反**。当其对应的软元件状态为 **`OFF` (0)** 时，触点**闭合**，逻辑导通；状态为 **`ON` (1)** 时，触点**断开**，逻辑断开。 | 1. 能准确识别和绘制符号（带斜杠）。<br>2. 理解其逻辑：**得电断开，失电闭合**。<br>3. 在程序中通常用作**停止条件或保护条件**。 |
| **输出线圈** | <code>-( )-</code> | **类比**：继电器线圈、指示灯、接触器。<br>**功能**：当能流（逻辑电流）成功流到线圈时，线圈**得电**，将其对应的软元件状态置为 **`ON` (1)**，从而控制外部设备动作。 | 1. 能准确识别和绘制符号。<br>2. 理解线圈是逻辑的**输出和执行终点**。 |

**2. 核心应用案例（必须掌握的逻辑转化）**

| 案例名称 | 电路逻辑与梯形图实现 | 关键细节与要点 |
| :--- | :--- | :--- |
| **电机启保停控制** | **逻辑**：<br>- **启动**：按下常开按钮（程序中使用`X0`常开触点）。<br>- **自锁**：线圈（`Y0`）得电后，利用自身的一个**常开触点**与启动按钮**并联**，实现持续得电。<br>- **停止**：串联一个常闭按钮（程序中使用`X1`常闭触点）。<br>**外部接线与程序对应**：若外部停止按钮是常闭触点，则程序中`X1`**必须使用常闭触点指令**，逻辑才正确。 | **核心概念**：**自锁**。理解如何用软件触点替代硬件接触器的自锁触点。 |
| **多地控制** | **逻辑**：<br>- **多地启动**：将多个地方的启动按钮对应的常开触点（如`X0`, `X2`）进行**并联**。（“或”逻辑，任意一地都可启动）。<br>- **多地停止**：将多个地方的停止按钮对应的常闭触点（如`X1`, `X3`）进行**串联**。（“与”逻辑，任意一地都可停止）。 | **掌握标准**：牢记 **“停止串联，启动并联”** 的硬件接线与软件编程原则。 |
| **电机正反转控制** | **逻辑**：<br>- **正转回路**：包含正转启动按钮（常开）、停止按钮（常闭）、以及**反转接触器的常闭触点**（用于互锁）。<br>- **反转回路**：包含反转启动按钮（常开）、停止按钮（常闭）、以及**正转接触器的常闭触点**。<br>- **互锁**：将正转线圈（`Y0`）的**常闭触点**串联在反转回路中，同时将反转线圈（`Y1`）的**常闭触点**串联在正转回路中。确保正转时反转不能启动，反之亦然。 | **核心概念**：**互锁（硬互锁）**。这是安全设计的关键，防止两个接触器同时吸合导致电源短路。必须理解其重要性并能正确绘制梯形图。 |

**总结标准**：最终目标是能够将传统的继电器控制电路图，准确无误地转化为使用常开、常闭触点和输出线圈的PLC梯形图程序，并理解其内在逻辑关系。