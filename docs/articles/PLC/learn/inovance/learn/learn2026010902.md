## **一、 课程大纲总结**

本节课程主要围绕**H5U PLC的定时器指令**展开，核心内容如下：

1.  **引言**：介绍定时器在POC编程中的基础性和重要性，及其在自动化控制中的广泛应用（如延时控制、时间记录）。
2.  **H5U定时器概述**：讲解定时器的国际标准、基本类型、技术参数（时间基准、设定值范围）和核心变量（IN, PT, R, Q, ET）。
3.  **脉冲定时器（TPR）详解**：深入讲解其功能原理、工作逻辑（边沿触发、计时独立）、复位机制及编程注意事项（如整数前加`K`）。
4.  **接通延时定时器（TONR）详解**：讲解其功能原理（电平触发、累计计时）、中断与复位特性，并与传统继电器系统对比。
5.  **工程应用实例：抢答器系统设计**：通过一个完整的案例，演示如何综合运用定时器（TPR）和逻辑互锁等指令解决实际问题，并强调编程要点与仿真验证。
6.  **课程总结与拓展**：对比不同定时器的特点，并拓展定时器在工业场景（如防撞控制）中的应用思路。

---

## **二、 根据节点归纳总结**

### **1. 最常用 & 各种定时器的特点与区别**

*   **最常用**：**接通延时定时器（TONR）** 是实际工程中使用最广泛的定时器，其逻辑（输入持续有效一段时间后输出）符合大多数延时控制场景。
*   **特点与区别**：
    *   **脉冲定时器（TPR）**：**边沿触发**。输入信号出现上升沿时**立即**产生一个固定宽度的脉冲输出。**计时过程不受输入信号变化影响**。类似于“单次定时开关”。
    *   **接通延时定时器（TONR）**：**电平触发**。输入信号必须**持续保持为ON**，直到计时完成，输出才导通。若输入中途断开，计时会暂停或重置（取决于具体型号实现，笔记中提及H5U的TONR会重置ET）。类似于“需要持续按压才能完成的倒计时”。

| 特性 | 脉冲定时器（TPR） | 接通延时定时器（TONR） |
| :--- | :--- | :--- |
| **触发方式** | 边沿触发（上升沿） | 电平触发（持续为ON） |
| **输出动作** | 计时开始时**立即**输出ON | 计时完成后**才**输出ON |
| **输入中断影响** | 计时不受影响，会继续完成 | 计时暂停或重置，输出不会ON |
| **典型应用** | 生成固定宽度脉冲、抢答器限时 | 设备延时启动、工作时间累计 |

### **2. H5U定时器概述及与其他品牌PLC区别**

*   **概述**：
    *   **标准**：遵循IEC 61131-3国际标准，保证了不同品牌PLC间定时器基本逻辑的相似性。
    *   **增强功能**：在标准基础上**增加了复位（R）功能**，控制更灵活。
    *   **技术参数**：时间基准为1ms；设定值（PT）范围极大（0 ~ 24天左右）；最多可同时使用4096个定时器。
    *   **核心变量**：
        *   `IN`：启动输入（必需）。
        *   `PT`：预设时间值（必需），为32位双整数，书写时需加前缀`K`（如`K10000`）。
        *   `R`：复位输入（可选），优先级最高。
        *   `Q`：定时器状态输出。
        *   `ET`：当前计时值，32位寄存器。
*   **与其他品牌PLC的区别**：
    *   **共性**：基本工作原理（如TON功能）与西门子、三菱等主流品牌类似，易于迁移学习。
    *   **特性**：**内置的复位引脚（R）** 可能是一些品牌标准定时器指令所不具备的（通常需额外编写复位逻辑）。**时间基准和范围**等具体参数各有不同。

### **3. 脉冲定时器（TPR）与应用**

*   **核心特点**：笔记中多次强调其**边沿触发**和**计时独立性**。一旦启动，计时过程就像“脱缰的野马”，不受输入信号后续状态影响，直至完成。
*   **关键细节**：
    *   编程时整数必须加`K`，如`K10000`。
    *   复位（R）信号具有最高优先级，任何状态下都能强制清零ET和Q。
    *   计时完成后，若IN已为OFF，则ET自动清零。
*   **应用**：
    *   **核心应用**：**抢答器系统的限时控制**。利用TPR在主持人发出开始信号（上升沿）后，立即建立一个10秒的“抢答有效窗口”（M0），在此窗口内响应有效。
    *   **拓展应用**：任何需要生成固定时长脉冲的场景，如指示灯闪烁、阀门开启时间控制等。

### **4. 接通延时定时器（TONR）说明、效果及其特点**

*   **工作原理**：当输入（IN）为ON时开始计时，**必须保持IN持续为ON**，当当前值（ET）达到预设值（PT）时，输出（Q）才变为ON。
*   **效果**：实现“延时接通”的功能。在工业中如电机星三角启动的延时切换。
*   **显著特点**：
    *   **对输入信号的稳定性要求高**：输入信号任何中断都会导致计时失败（暂停或重置），因此在实际使用中常需配合自锁电路或保持继电器来确保输入信号的稳定。
    *   **累积性**：型号中的“R”（Retentive）通常表示有记忆/保持功能，但根据笔记描述，H5U的TONR在输入中断时ET会清零，这与标准有保持功能的定时器行为不同，**编程时需以实际验证为准**。

### **5. 工程应用实例与小练习要求**

*   **抢答器实例核心要点**：
    1.  **全局复位**：使用`CRST`批量复位指令或复位按钮（X6）高效清除所有状态（Y0-Y2）。
    2.  **定时控制**：使用TPR定时器（由X5上升沿启动）产生抢答有效窗口（M0）。
    3.  **信号采集**：同一小组的多个按钮采用**并联**逻辑，确保任意一个按下均可触发。
    4.  **互锁逻辑**：这是实现“唯一响应”的关键。任何一组抢答成功后（如Y0亮），其输出触点要立即**锁住**其他组的抢答通路，防止后续响应。
    5.  **输出控制**：使用**置位指令**`SET`或“起保停”电路实现输出状态的保持，直到复位信号到来。